{% load static %}
{% load cloudinary %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waste2Wealth Marketplace</title>

    <!-- ‚úÖ Correct CSS Path -->
    <link rel="stylesheet" href="{% static 'marketplace/css/style.css' %}">
</head>

<body>

<!-- ================= NAVBAR ================= -->
<nav class="navbar">

    <div class="logo">Waste2Wealth</div>

    <div class="menu-toggle" onclick="toggleMenu()">‚ò∞</div>

    <ul class="nav-links">
        <li><a href="{% url 'home' %}">Home</a></li>

        {% if not user.is_authenticated %}
            <li><a href="#about">About</a></li>
            <li><a href="#features">Features</a></li>
            <li><a href="#how">How It Works</a></li>
            <li><a href="#contact">Contact</a></li>
        {% endif %}

        <li><a href="{% url 'marketplace' %}">Marketplace</a></li>

        {% if user.is_authenticated %}
            <li><a href="{% url 'my_listings' %}">My Listings</a></li>
            <li><a href="{% url 'upload_waste' %}">Upload Waste</a></li>
        {% endif %}
    </ul>

    <div class="auth-buttons">
        {% if user.is_authenticated %}
            <span class="welcome-text">Hi, {{ user.username }}</span>
            <a href="{% url 'logout' %}" class="btn login-btn">Logout</a>
        {% else %}
            <a href="{% url 'login' %}" class="btn login-btn">Login</a>
            <a href="{% url 'signup' %}" class="btn signup-btn">Sign Up</a>
        {% endif %}
    </div>

</nav>


<!-- ================= HERO ================= -->
<section id="home" class="hero">
    <div class="hero-text">
        <h1>Turn Your Waste Into Money</h1>
        <p>Sell your waste, earn rewards, and help the environment.</p>

        <a href="{% url 'marketplace' %}" class="btn primary-btn">Browse Marketplace</a>

        {% if user.is_authenticated %}
            <a href="{% url 'upload_waste' %}" class="btn outline-btn">Upload Waste</a>
        {% else %}
            <a href="{% url 'login' %}" class="btn outline-btn">Start Selling</a>
        {% endif %}
    </div>
</section>


<!-- ================= ABOUT ================= -->
<section id="about" class="about-section">
    <div class="about-container">

        <div class="about-text">
            <h2>About Waste2Wealth</h2>

            <p>
                Waste2Wealth helps individuals and businesses convert waste into wealth.
                Sellers can list waste items while recyclers purchase efficiently.
            </p>

            <p>
                Using AI & ML, the platform suggests fair prices and buyer matching.
            </p>
        </div>

        <div class="about-highlight">
            <div class="highlight-box">
                <h3>‚ôªÔ∏è Sustainable</h3>
                <p>Promotes recycling</p>
            </div>

            <div class="highlight-box">
                <h3>ü§ñ AI Powered</h3>
                <p>Smart pricing & matching</p>
            </div>

            <div class="highlight-box">
                <h3>üí∞ Profitable</h3>
                <p>Turn waste into earnings</p>
            </div>
        </div>

    </div>
</section>


<!-- ================= FEATURES ================= -->
<section id="features" class="features-section">

    <h2>Key Features</h2>

    <div class="features-grid">

        <div class="feature-card">
            <img src="{% static 'marketplace/images/upload.png' %}">
            <h3>Upload Waste</h3>
            <p>Easily upload waste with images and description.</p>
        </div>

        <div class="feature-card">
            <img src="{% static 'marketplace/images/ml.png' %}">
            <h3>AI Price Suggestion</h3>
            <p>Machine learning predicts fair price.</p>
        </div>

        <div class="feature-card">
            <img src="{% static 'marketplace/images/buyer.png' %}">
            <h3>Smart Buyer Matching</h3>
            <p>Connect with relevant buyers.</p>
        </div>

        <div class="feature-card">
            <img src="{% static 'marketplace/images/analytics.png' %}">
            <h3>Analytics Dashboard</h3>
            <p>Track listings and earnings.</p>
        </div>

    </div>

</section>


<!-- ================= MARKETPLACE PREVIEW ================= -->
<section class="marketplace-section">

    <div class="container">
        <h2>Latest Waste Listings ‚ôªÔ∏è</h2>

        {% if latest_wastes %}
        <div class="marketplace-grid">

            {% for waste in latest_wastes %}
            <div class="marketplace-card">

                {% if waste.image %}
                    {% cloudinary waste.image width=400 height=250 crop="fill" %}
                {% else %}
                    <img src="{% static 'marketplace/images/placeholder.jpg' %}">
                {% endif %}

                <h3>{{ waste.get_waste_type_display }}</h3>

                <p>Weight: {{ waste.weight_kg }} kg</p>

                <p>
                    {% if waste.final_price %}
                        ‚Çπ {{ waste.final_price }}
                    {% else %}
                        Price on request
                    {% endif %}
                </p>

            </div>
            {% endfor %}

        </div>
        {% endif %}

    </div>
</section>


<!-- ================= HOW IT WORKS ================= -->
<section id="how" class="how-it-works">

    <h2>How It Works</h2>

    <div class="steps-container">

        <div class="step">
            <img src="{% static 'marketplace/images/step1.png' %}">
            <h3>Upload</h3>
        </div>

        <div class="step">
            <img src="{% static 'marketplace/images/step2.png' %}">
            <h3>Price Suggestion</h3>
        </div>

        <div class="step">
            <img src="{% static 'marketplace/images/step3.png' %}">
            <h3>Sell & Earn</h3>
        </div>

        <div class="step">
            <img src="{% static 'marketplace/images/step4.png' %}">
            <h3>Track</h3>
        </div>

    </div>

</section>


<!-- ================= CONTACT ================= -->
<section id="contact" class="contact">
    <h2>Contact Us</h2>
    <p>Email: support@waste2wealth.com</p>
</section>


<footer>
    <p>¬© 2026 Waste2Wealth</p>
</footer>


<script>
function toggleMenu(){
    document.querySelector('.mobile-menu').classList.toggle('active');
}
</script>

</body>
</html>
